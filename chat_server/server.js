!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=33)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.server=o?"https://ohshutit.app":"http://localhost:8000",o=(t.demoObject=n(60),t.MUIDemoTheme=n(61).default,t.production=!1);t.wsURL=o?"wss://ohshutit.app/ws":"ws://localhost:8000/ws",t.socket=8001,t.status_codes={OK:200,RESOURCE_CREATED:201,BAD_CREDENTIALS:400,RESOURCE_DOESNT_EXIST:401,RESOURCE_ALREADY_EXISTS:402,NOT_FOUND:404,MISSING:501,skt105:"Sockets authentication didnt find any matching users"};t.database_name="chat_app";t.database={url:"mongodb://localhost/chat_app"},t.googleAuth={clientID:"443541868618-98u41tbu7r8h2j25d8m87em6au3af9tp.apps.googleusercontent.com",clientSecret:"zfgooO9bgy9l9_k0tYZPaP3N",callbackURL:r+"/auth/google/callback"},t.facebookAuth={clientID:"1347027622099102",clientSecret:"b35d42a92dbd925b4edbe7d5b4648fcb",callbackURL:r+"/auth/facebook/callback"},t.secret="xclkjhasdljvhasdkjbaxkjcbaxkcjbadkjfhajbvlkaj"},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-redux")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=void 0;var r=i(n(55)),o=i(n(56)),a=i(n(57));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.ActionCreators=Object.assign({},r,o,a)},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("passport")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADD_TEST="ADD_TEST",t.USER_DATA="USER_DATA",t.SITE_LOADED="SITE_LOADED",t.GLOBAL_CHAT="GLOBAL_CHAT",t.SOCKET="SOCKET"},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("react-router-dom")},function(e,t,n){"use strict";var r=n(80).Strategy,o=n(84).Strategy,a=(n(85).Strategy,n(94).Strategy),i=n(13),s=n(0),u=n(96),l=n(28).Strategy,c=n(28).ExtractJwt;e.exports=function(e){e.serializeUser(function(e,t){t(null,e.id)}),e.deserializeUser(function(e,t){i.findById(e,function(e,n){t(e,n)})});var t={};t.jwtFromRequest=c.fromAuthHeaderWithScheme("jwt"),t.secretOrKey=s.secret,e.use(new l(t,function(e,t){i.findOne({_id:e._id},function(e,n){return e?t(e,!1):t(null,n||!1)})})),e.use("local-mobile-signup",new r({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(e,t,n,r){process.nextTick(function(){var o={$or:[{email:t.toLowerCase()},{username:e.body.username.toLowerCase()}]};i.findOne(o,function(o,a){if(o)return r(o);if(a)return a.email==t.toLowerCase()?r(null,!1,"That email is already taken."):r(null,!1,"That username is already taken.");i.findOne({"facebook.email":t},function(o,a){if(o)return r(o);if(a)return r(null,!1,"That email is already taken with a facebook login.");var s=new i;s.email=t.toLowerCase(),s.username=e.body.username.toLowerCase().replace(/  |\r\n|\n|\r/gm,"").replace(/ /g,"_"),s.password=n,s.save(function(e){if(e)throw e;return r(null,s)})})})})})),e.use("local-signup",new r({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(e,t,n,r){process.nextTick(function(){i.findOne({email:t},function(o,a){if(o)return r(o);if(a)return r(null,!1,e.flash("signupMessage","That email is already taken."));i.findOne({"facebook.email":t},function(o,a){if(o)return r(o);if(a)return r(null,!1,e.flash("signupMessage","That email is already taken with a facebook login."));var s=new i;s.email=t,s.password=n,s.save(function(e){if(e)throw e;return r(null,s)})})})})})),e.use("local-login",new r({usernameField:"email",passwordField:"password",passReqToCallback:!0},function(e,t,n,r){i.findOne({email:t},function(e,t){return console.log("inside local login ->"),e?(console.log("ERR!"),r(e)):t?t.validPassword(n)?(console.log("password correct ->",t),t.password="xxx",r(null,t)):(console.log("PASSWORD DOES NOT MATCH!"),r(null,!1)):(console.log("NO USER!"),r(null,!1))})})),e.use(new o({clientID:s.facebookAuth.clientID,clientSecret:s.facebookAuth.clientSecret,callbackURL:s.facebookAuth.callbackURL,profileFields:["id","email","first_name","last_name"]},function(e,t,n,r){process.nextTick(function(){i.findOne({"facebook.id":n.id},function(o,a){if(o)return r(o);if(a)return r(null,a);var s=new i;s.facebook.id=n.id,s.facebook.access_token=e,s.facebook.refresh_token=t,s.facebook.name=n.name.givenName+" "+n.name.familyName,s.facebook.email=(n.emails[0].value||"").toLowerCase(),s.email=(n.emails[0].value||"").toLowerCase(),s.avatar="https://graph.facebook.com/v2.6/"+n.id+"/picture?height=600&width=600",s.save(function(e){if(e)throw e;return r(null,s)})})})})),e.use(new u({clientID:s.facebookAuth.clientID,clientSecret:s.facebookAuth.clientSecret},function(e,t,n,r){i.findOne({"facebook.id":n.id},function(o,a){if(o)return r(o);if(a)return r(null,a);var s=new i;console.log({profile:n.photos}),s.facebook.id=n.id,s.facebook.access_token=e,s.facebook.refresh_token=t,s.facebook.name=n.name.givenName+" "+n.name.familyName,s.facebook.email=(n.emails[0].value||"").toLowerCase(),s.avatar="https://graph.facebook.com/v2.6/"+n.id+"/picture?height=600&width=600",s.save(function(e){if(e)throw e;return r(null,s)})})})),e.use(new a({clientID:s.googleAuth.clientID,clientSecret:s.googleAuth.clientSecret,callbackURL:s.googleAuth.callbackURL},function(e,t,n,r){process.nextTick(function(){i.findOne({"google.id":n.id},function(t,o){if(t)return r(t);if(o)return r(null,o);var a=new i;a.google.id=n.id,a.google.token=e,a.google.name=n.displayName,a.google.email=n.emails[0].value,a.save(function(e){if(e)throw e;return r(null,a)})})})}))}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTitle=void 0;var r=l(n(54)),o=n(58),a=l(n(62)),i=l(n(64)),s=l(n(66)),u=l(n(67));function l(e){return e&&e.__esModule?e:{default:e}}var c=[{path:"/",exact:!0,component:r.default,title:"SSR Home Page"},{path:"/login",exact:!0,component:a.default,title:"Login to your HERMN account"},{path:"/signup",exact:!0,component:i.default,title:"Register for a HERMN Account"},{path:"/profile",exact:!0,component:s.default,title:"Your Account"},{path:"/test/:id",component:u.default,wildcard:!0,title:"Results for {{id}}",fetchInitialData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,o.fetchDemoData)(e.split("/").pop())}}];t.default=c;t.getTitle=function(){var e=window.location.href,t="/"+(e=(e=e.substring(0,e.indexOf("?",""))).replace("#","")).split("/").pop();console.log(t),document.title=c.find(function(e){return e.path===t}).title}},function(e,t,n){"use strict";var r=n(8),o=n(95),a=r.Schema({avatar:String,name:String,username:{type:String,unique:!0},email:{type:String,unique:!0},password:String,facebook:{id:String,access_token:String,refresh_token:String,email:String,name:String,username:String},google:{id:String,token:String,email:String,name:String}});a.pre("save",function(e){var t=this;if(!this.isModified("password")&&!this.isNew)return e();o.genSalt(10,function(n,r){if(n)return e(n);o.hash(t.password,r,null,function(n,r){if(n)return e(n);t.password=r,e()})})}),a.methods.validPassword=function(e){return o.compareSync(e,this.password)},a.methods.comparePasswordMobile=function(e,t){o.compare(e,this.password,function(e,n){if(e)return t(e);t(null,n)})},e.exports=r.model("User",a)},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments[1];return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}},function(e,t){e.exports=require("@material-ui/core/Input")},function(e,t){e.exports=require("@material-ui/core/InputLabel")},function(e,t){e.exports=require("@material-ui/core/InputAdornment")},function(e,t){e.exports=require("@material-ui/core/FormControl")},function(e,t){e.exports=require("@material-ui/icons/Visibility")},function(e,t){e.exports=require("@material-ui/icons/VisibilityOff")},function(e,t){e.exports=require("@material-ui/core/IconButton")},function(e,t){e.exports=require("react-icons/fa")},function(e,t){e.exports=require("@material-ui/core/Snackbar")},function(e,t){e.exports=require("passport-oauth1")},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var o=Object.create(t.prototype);r.__proto__=o}if(!(r instanceof t)){function a(){}a.prototype=t.prototype,n(r,a=new a),e.prototype=r=a}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}var o="http://www.w3.org/1999/xhtml",a={},i=a.ELEMENT_NODE=1,s=a.ATTRIBUTE_NODE=2,u=a.TEXT_NODE=3,l=a.CDATA_SECTION_NODE=4,c=a.ENTITY_REFERENCE_NODE=5,f=a.ENTITY_NODE=6,p=a.PROCESSING_INSTRUCTION_NODE=7,d=a.COMMENT_NODE=8,h=a.DOCUMENT_NODE=9,m=a.DOCUMENT_TYPE_NODE=10,g=a.DOCUMENT_FRAGMENT_NODE=11,y=a.NOTATION_NODE=12,v={},b={},w=(v.INDEX_SIZE_ERR=(b[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(b[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(b[3]="Hierarchy request error",3)),_=(v.WRONG_DOCUMENT_ERR=(b[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(b[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(b[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(b[7]="No modification allowed",7),v.NOT_FOUND_ERR=(b[8]="Not found",8)),x=(v.NOT_SUPPORTED_ERR=(b[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(b[10]="Attribute in use",10));v.INVALID_STATE_ERR=(b[11]="Invalid state",11),v.SYNTAX_ERR=(b[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(b[13]="Invalid modification",13),v.NAMESPACE_ERR=(b[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(b[15]="Invalid access",15);function E(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,b[e]),this.message=b[e],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=e,t&&(this.message=this.message+": "+t),n}function S(){}function k(e,t){this._node=e,this._refresh=t,O(this)}function O(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);ne(e,"length",r.length),n(r,e),e._inc=t}}function N(){}function T(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function C(e,t,n,r){if(r?t[T(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&M(o,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(o,e,n))}}function A(e,t,n){var r=T(t,n);if(!(r>=0))throw E(_,new Error(e.tagName+"@"+n));for(var o=t.length-1;r<o;)t[r]=t[++r];if(t.length=o,e){var a=e.ownerDocument;a&&(M(a,e,n),n.ownerElement=null)}}function R(e){if(this._features={},e)for(var t in e)this._features=e[t]}function D(){}function P(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function j(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(j(e,t))return!0}while(e=e.nextSibling)}function I(){}function M(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function L(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,a=0;o;)r[a++]=o,o=o.nextSibling;r.length=a}}}function q(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,L(e.ownerDocument,e),t}function U(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var o=t.firstChild;if(null==o)return t;var a=t.lastChild}else o=a=t;var i=n?n.previousSibling:e.lastChild;o.previousSibling=i,a.nextSibling=n,i?i.nextSibling=o:e.firstChild=o,null==n?e.lastChild=a:n.previousSibling=a;do{o.parentNode=e}while(o!==a&&(o=o.nextSibling));return L(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function z(){this._nsMap={}}function F(){}function B(){}function W(){}function H(){}function $(){}function J(){}function G(){}function K(){}function V(){}function X(){}function Y(){}function Z(){}function Q(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,o=r.prefix,a=r.namespaceURI;if(a&&null==o&&null==(o=r.lookupPrefix(a)))var i=[{namespace:a,prefix:null}];return te(this,n,e,t,i),n.join("")}function ee(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var a=n.length;a--;){var i=n[a];if(i.prefix==r)return i.namespace!=o}return!0}function te(e,t,n,r,a){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case i:a||(a=[]);a.length;var f=e.attributes,y=f.length,v=e.firstChild,b=e.tagName;n=o===e.namespaceURI||n,t.push("<",b);for(var w=0;w<y;w++){"xmlns"==(_=f.item(w)).prefix?a.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&a.push({prefix:"",namespace:_.value})}for(w=0;w<y;w++){var _;if(ee(_=f.item(w),0,a)){var x=_.prefix||"",E=_.namespaceURI,S=x?" xmlns:"+x:" xmlns";t.push(S,'="',E,'"'),a.push({prefix:x,namespace:E})}te(_,t,n,r,a)}if(ee(e,0,a)){x=e.prefix||"",E=e.namespaceURI,S=x?" xmlns:"+x:" xmlns";t.push(S,'="',E,'"'),a.push({prefix:x,namespace:E})}if(v||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),n&&/^script$/i.test(b))for(;v;)v.data?t.push(v.data):te(v,t,n,r,a),v=v.nextSibling;else for(;v;)te(v,t,n,r,a),v=v.nextSibling;t.push("</",b,">")}else t.push("/>");return;case h:case g:for(v=e.firstChild;v;)te(v,t,n,r,a),v=v.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,P),'"');case u:return t.push(e.data.replace(/[<&]/g,P));case l:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case m:var k=e.publicId,O=e.systemId;if(t.push("<!DOCTYPE ",e.name),k)t.push(' PUBLIC "',k),O&&"."!=O&&t.push('" "',O),t.push('">');else if(O&&"."!=O)t.push(' SYSTEM "',O,'">');else{var N=e.internalSubset;N&&t.push(" [",N,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){e[t]=n}E.prototype=Error.prototype,n(v,E),S.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},k.prototype.item=function(e){return O(this),this[e]},r(k,S),N.prototype={length:0,item:S.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new E(x);var n=this.getNamedItem(e.nodeName);return C(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new E(x);return t=this.getNamedItemNS(e.namespaceURI,e.localName),C(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return A(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return A(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},R.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new I;if(r.implementation=this,r.childNodes=new S,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new J;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},D.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return U(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return q(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o=new n.constructor;for(var a in n){var u=n[a];"object"!=typeof u&&u!=o[a]&&(o[a]=u)}n.childNodes&&(o.childNodes=new S);o.ownerDocument=t;switch(o.nodeType){case i:var l=n.attributes,c=o.attributes=new N,f=l.length;c._ownerElement=o;for(var p=0;p<f;p++)o.setAttributeNode(e(t,l.item(p),!0));break;case s:r=!0}if(r)for(var d=n.firstChild;d;)o.appendChild(e(t,d,r)),d=d.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(a,D),n(a,D.prototype),I.prototype={nodeName:"#document",nodeType:h,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==i&&(this.documentElement=e),U(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),q(this,e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case i:(o=n.cloneNode(!1)).ownerDocument=t;case g:break;case s:r=!0}o||(o=n.cloneNode(!1));o.ownerDocument=t;o.parentNode=null;if(r)for(var a=n.firstChild;a;)o.appendChild(e(t,a,r)),a=a.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return j(this.documentElement,function(n){if(n.nodeType==i&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new S,(t.attributes=new N)._ownerElement=t,t},createDocumentFragment:function(){var e=new X;return e.ownerDocument=this,e.childNodes=new S,e},createTextNode:function(e){var t=new W;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new $;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new Y;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new F;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new V;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new z,r=t.split(":"),o=n.attributes=new N;return n.childNodes=new S,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new F,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(I,D),z.prototype={nodeType:i,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new k(this,function(t){var n=[];return j(t,function(r){r===t||r.nodeType!=i||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new k(this,function(n){var r=[];return j(n,function(o){o===n||o.nodeType!==i||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},I.prototype.getElementsByTagName=z.prototype.getElementsByTagName,I.prototype.getElementsByTagNameNS=z.prototype.getElementsByTagNameNS,r(z,D),F.prototype.nodeType=s,r(F,D),B.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(b[w])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(B,D),W.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(W,B),H.prototype={nodeName:"#comment",nodeType:d},r(H,B),$.prototype={nodeName:"#cdata-section",nodeType:l},r($,B),J.prototype.nodeType=m,r(J,D),G.prototype.nodeType=y,r(G,D),K.prototype.nodeType=f,r(K,D),V.prototype.nodeType=c,r(V,D),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=g,r(X,D),Y.prototype.nodeType=p,r(Y,D),Z.prototype.serializeToString=function(e,t,n){return Q.call(e,t,n)},D.prototype.toString=Q;try{if(Object.defineProperty){Object.defineProperty(k.prototype,"length",{get:function(){return O(this),this.$$length}}),Object.defineProperty(D.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case i:case g:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case i:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=R,t.XMLSerializer=Z},function(e,t){e.exports=require("passport-jwt")},function(e,t){e.exports=require("busboy-body-parser")},function(e,t){e.exports=require("jimp")},function(e,t){e.exports=require("gridfs-stream")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.login=void 0;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(13));var a=n(14);t.login=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t){t.wss;var n,i,s,u,l,c=t.ws,f=t.data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,i=void 0,!f||!f.auth||"facebook"!==f.auth.platform){e.next=29;break}return e.next=4,o.default.findOne({"facebook.access_token":f.auth.accessToken});case 4:if(!(n=e.sent)){e.next=18;break}n=n.toJSON(),c.id=n._id,delete n.password,delete n.__v,delete n.iat,delete n.facebook.id,delete n.facebook.access_token,delete n.facebook.refresh_token,delete n.facebook.email,i={status:r.status_codes.OK,user:n,token:f.auth.accessToken,type:"login"},e.next=29;break;case 18:if(!f.auth.accessToken){e.next=29;break}return e.next=21,fetch(r.server+"/auth/facebook/token",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer "+f.auth.accessToken}}).then(function(e){return e.json()}).catch(function(e){return alert("there was an error in loginToServerWithFacebook",e)});case 21:return s=e.sent,(u=s.user).facebook.access_token=f.auth.accessToken,u.facebook.refresh_token=f.auth.accessToken,e.next=27,o.default.findOneAndUpdate({_id:s.user._id},{$set:{"facebook.access_token":u.facebook.access_token,"facebook.refresh_token":u.facebook.refresh_token}});case 27:e.sent,i=u;case 29:if("local"!==f.auth.platform){e.next=36;break}return l=f.auth.token,e.next=33,a.verify(l,r.secret);case 33:(n=e.sent)&&(delete n.password,delete n.__v,delete n.iat),i={status:r.status_codes.OK,user:n,token:l};case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){n(34),e.exports=n(35)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,n){"use strict";var r=w(n(5)),o=w(n(8)),a=w(n(36)),i=w(n(37)),s=w(n(38)),u=w(n(39)),l=w(n(6)),c=w(n(41)),f=w(n(49)),p=w(n(50)),d=w(n(51)),h=w(n(97)),m=w(n(98)),g=w(n(99)),y=w(n(100)),v=w(n(101)),b=n(0);function w(e){return e&&e.__esModule?e:{default:e}}var _=(0,r.default)(),x=n(104)(_),E=process.env.PORT||8e3;o.default.connect(b.database.url),n(10)(l.default),_.use((0,f.default)()),_.use((0,a.default)("dev")),_.use((0,p.default)("public/favicon.png")),_.use(r.default.static("public")),_.use(i.default.json()),_.use(i.default.urlencoded({extended:!1})),_.use((0,s.default)()),_.use((0,c.default)({name:"CHAT_APP",keys:["your_keys","go_here","make_many"],maxAge:36e5})),_.use(l.default.initialize()),_.use(l.default.session()),_.use((0,u.default)()),_.use("/tests",h.default),_.use("/api",m.default),_.use("/api/mobile",y.default),_.use("/auth",g.default),_.ws("/ws",function(e,t){return(0,v.default)({ws:e,wss:x.getWss(),req:t})}),_.use("/",d.default),_.listen(E,function(){console.log("server listing on port ",E)})},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t,n){e.exports=n(40)},function(e,t,n){var r=n(11).format,o=n(11).isArray;function a(e,t){if(void 0===this.session)throw Error("req.flash() requires sessions");var n=this.session.flash=this.session.flash||{};if(e&&t){if(arguments.length>2&&r){var a=Array.prototype.slice.call(arguments,1);t=r.apply(void 0,a)}else if(o(t))return t.forEach(function(t){(n[e]=n[e]||[]).push(t)}),n[e].length;return(n[e]=n[e]||[]).push(t)}if(e){var i=n[e];return delete n[e],i||[]}return this.session.flash={},n}e.exports=function(e){var t=void 0===(e=e||{}).unsafe||!e.unsafe;return function(e,n,r){if(e.flash&&t)return r();e.flash=a,r()}}},function(e,t,n){"use strict";
/*!
 * cookie-session
 * Copyright(c) 2013 Jonathan Ong
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(42)("cookie-session"),o=n(43),a=n(48);function i(e,t){if(Object.defineProperty(this,"_ctx",{value:e}),t)for(var n in t)this[n]=t[n]}function s(e){this.req=e,this._new=!0,this._val=void 0}e.exports=function(e){var t=e||{},n=t.name||"session",s=t.keys;!s&&t.secret&&(s=[t.secret]);null==t.overwrite&&(t.overwrite=!0);null==t.httpOnly&&(t.httpOnly=!0);null==t.signed&&(t.signed=!0);if(!s&&t.signed)throw new Error(".keys required.");return r("session options %j",t),function(e,u,l){var c,f=new o(e,u,{keys:s});e.sessionCookies=f,e.sessionOptions=Object.create(t),e.sessionKey=n,Object.defineProperty(e,"session",{configurable:!0,enumerable:!0,get:function(){return c||(!1===c?null:c=function(e){var t=e.sessionCookies,n=e.sessionKey,o=e.sessionOptions,a=t.get(n,o);if(a){r("parse %s",a);try{return i.deserialize(e,a)}catch(e){if(!(e instanceof SyntaxError))throw e;return}}}(e)||function(e){return r("new session"),i.create(e)}(e))},set:function(e){if(null==e)return c=!1,e;if("object"==typeof e)return c=i.create(this,e);throw new Error("req.session can only be set as null or an object.")}}),a(u,function(){if(void 0!==c)try{!1===c?f.set(n,"",e.sessionOptions):c.isNew&&!c.isPopulated||!c.isChanged||c.save()}catch(e){r("error saving session %s",e.message)}}),l()}},i.create=function(e,t){return new i(new s(e),t)},i.deserialize=function(e,t){var n=new s(e),r=function(e){var t=new Buffer(e,"base64").toString("utf8");return JSON.parse(t)}(t);return n._new=!1,n._val=t,new i(n,r)},i.serialize=function(e){return function(e){var t=JSON.stringify(e);return new Buffer(t).toString("base64")}(e)},Object.defineProperty(i.prototype,"isChanged",{get:function(){return this._ctx._new||this._ctx._val!==i.serialize(this)}}),Object.defineProperty(i.prototype,"isNew",{get:function(){return this._ctx._new}}),Object.defineProperty(i.prototype,"length",{get:function(){return Object.keys(this).length}}),Object.defineProperty(i.prototype,"isPopulated",{get:function(){return Boolean(this.length)}}),i.prototype.save=function(){var e=this._ctx,t=i.serialize(this),n=e.req.sessionCookies,o=e.req.sessionKey,a=e.req.sessionOptions;r("save %s",t),n.set(o,t,a)}},function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";
/*!
 * cookies
 * Copyright(c) 2014 Jed Schmidt, http://jed.is/
 * Copyright(c) 2015-2016 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(44)("cookies"),o=n(45),a=n(47),i={},s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,u=/^(?:lax|strict)$/i;function l(e,t,n){if(!(this instanceof l))return new l(e,t,n);this.secure=void 0,this.request=e,this.response=t,n&&(Array.isArray(n)?(r('"keys" argument; provide using options {"keys": [...]}'),this.keys=new o(n)):n.constructor&&"Keygrip"===n.constructor.name?(r('"keys" argument; provide using options {"keys": keygrip}'),this.keys=n):(this.keys=Array.isArray(n.keys)?new o(n.keys):n.keys,this.secure=n.secure))}function c(e,t,n){if(!s.test(e))throw new TypeError("argument name is invalid");if(t&&!s.test(t))throw new TypeError("argument value is invalid");for(var e in t||(this.expires=new Date(0)),this.name=e,this.value=t||"",n)this[e]=n[e];if(this.path&&!s.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!s.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!u.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function f(e,t){return t.overwrite&&(e=e.filter(function(e){return 0!==e.indexOf(t.name+"=")})),e.push(t.toHeader()),e}l.prototype.get=function(e,t){var n,r,o,a,s,u,l=e+".sig",c=t&&void 0!==t.signed?t.signed:!!this.keys;if((n=this.request.headers.cookie)&&(r=n.match(function(e){return i[e]?i[e]:i[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)))){if(o=r[1],!t||!c)return o;if(a=this.get(l)){if(s=e+"="+o,!this.keys)throw new Error(".keys required for signed cookies");if(!((u=this.keys.index(s,a))<0))return u&&this.set(l,this.keys.sign(s),{signed:!1}),o;this.set(l,null,{path:"/",signed:!1})}}},l.prototype.set=function(e,t,n){var o=this.response,i=this.request,s=o.getHeader("Set-Cookie")||[],u=void 0!==this.secure?!!this.secure:"https"===i.protocol||i.connection.encrypted,l=new c(e,t,n),p=n&&void 0!==n.signed?n.signed:!!this.keys;if("string"==typeof s&&(s=[s]),!u&&n&&n.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(l.secure=u,n&&"secure"in n&&(l.secure=n.secure),n&&"secureProxy"in n&&(r('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),l.secure=n.secureProxy),s=f(s,l),n&&p){if(!this.keys)throw new Error(".keys required for signed cookies");l.value=this.keys.sign(l.toString()),l.name+=".sig",s=f(s,l)}return(o.set?a.OutgoingMessage.prototype.setHeader:o.setHeader).call(o,"Set-Cookie",s),this},c.prototype.path="/",c.prototype.expires=void 0,c.prototype.domain=void 0,c.prototype.httpOnly=!0,c.prototype.sameSite=!1,c.prototype.secure=!1,c.prototype.overwrite=!1,c.prototype.toString=function(){return this.name+"="+this.value},c.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(c.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),r.property(c.prototype,"maxage",'"maxage"; use "maxAge" instead'),l.connect=l.express=function(e){return function(t,n,r){t.cookies=n.cookies=new l(t,n,{keys:e}),r()}},l.Cookie=c,e.exports=l},function(e,t){e.exports=require("depd")},function(e,t,n){var r=n(46);function o(e,t,n){if(t||(t="sha1"),n||(n="base64"),!(this instanceof o))return new o(e,t,n);if(!(e&&0 in e))throw new Error("Keys must be provided.");function i(e,o){return r.createHmac(t,o).update(e).digest(n).replace(/\/|\+|=/g,function(e){return{"/":"_","+":"-","=":""}[e]})}this.sign=function(t){return i(t,e[0])},this.verify=function(e,t){return this.index(e,t)>-1},this.index=function(t,n){for(var r=0,o=e.length;r<o;r++)if(a(n,i(t,e[r])))return r;return-1}}o.sign=o.verify=o.index=function(){throw new Error("Usage: require('keygrip')(<array-of-keys>)")};var a=function(e,t){if(null==e&&null!=t)return!1;if(null==t&&null!=e)return!1;if(null==e&&null==t)return!0;if(e.length!==t.length)return!1;for(var n=1,r=0;r<e.length;r++)n&=e.charAt(r)===t.charAt(r)?1:0;return 1===n};e.exports=o},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("on-headers")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("serve-favicon")},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=b(n(5)),a=n(52),i=b(n(53)),s=b(n(1)),u=b(n(72)),l=n(9),c=b(n(12)),f=n(2),p=n(3),d=b(n(73)),h=b(n(6)),m=n(77),g=b(n(78)),y=n(0),v=n(79);function b(e){return e&&e.__esModule?e:{default:e}}n(10)(h.default),h.default.authenticate("jwt",{session:!1});var w=n(14),_=(0,o.default)();function x(e,t,n){return!!e.isAuthenticated()}var E=y.production?"":'<script src="http://localhost:8097"><\/script>';_.get("*",function(e,t,n){var o,h,b=new m.SheetsRegistry,_=c.default.find(function(t){return(0,l.matchPath)(e.url,t)})||{},S=_.fetchInitialData?_.fetchInitialData(e.path):Promise.resolve(),k=(0,f.createStore)(d.default);o=x(e)?w.sign(e.user.toJSON(),y.secret):null,h=x(e)?r({},e.user.toJSON(),{token:o}):null,S.then(function(n){var r={};r.repos=n,r.member=h;var o=_.wildcard?_.title.replace("{{id}}",e.url.split("/").pop()):_.title,c=new Map,f=(0,v.createGenerateClassName)(),d=(0,a.renderToString)(s.default.createElement(g.default,{classNamePrefix:"hermn-app",registry:b,generateClassName:f},s.default.createElement(v.MuiThemeProvider,{theme:(0,v.createMuiTheme)(y.MUIDemoTheme),sheetsManager:c},s.default.createElement(p.Provider,{store:k},s.default.createElement(l.StaticRouter,{location:e.url,context:r},s.default.createElement(i.default,{member:h})))))),m=b.toString(),w=k.getState();t.send('\n\t\t\t<!DOCTYPE html>\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<meta charset="utf-8">\n\t\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1">'+E+"<title>"+o+"</title>\n\t\t\t\t\t<script>\n\t\t\t\t\twindow.__INITIAL_DATA__ = "+(0,u.default)(n)+"\n\t\t\t\t\twindow.__USER_DATA__ = "+(0,u.default)(h)+"\n\t\t\t\t\twindow.__PRELOADED_STATE__ = "+JSON.stringify(w).replace(/</g,"\\u003c")+'\n\t\t\t\t\t<\/script>\n\t\t\t\t\t<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" />\n\t\t\t\t\t<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />\n\t\t\t\t\t<link rel="stylesheet" type="text/css" href="/css/style.min.css" />\n\t\t\t\t\t<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">\n\t\t\t\t\t<style>\n\n\t\t\t\t\t\thtml, body, #app, #app>div {\n\t\t\t\t\t\t\theight: 100%\n\t\t\t\t\t\t}\n\n\t\t\t\t\t</style>\n\t\t\t\t</head>\n\t\t\t\t<body id="body_view">\n\t\t\t\t\t<div id="app" style="flex: 1;">'+d+'</div>\n\t\t\t\t\t<style id="jss-server-side">'+m+'</style>\n\t\t\t\t\t<script src="/bundle.production.min.js" type="text/javascript"><\/script>\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t')}).catch(n)}),e.exports=_},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=h(a),s=h(n(12)),u=n(9),l=h(n(68)),c=h(n(69)),f=n(2),p=n(3),d=n(4);n(70),h(n(71));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=void 0;return(r=n.props.member)?r.login=!0:r={login:!1},n.props.userData(r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){return i.default.createElement("div",{style:{flex:1,height:"100%"}},i.default.createElement(c.default,null),this.props.redux.user._id&&!1,i.default.createElement(u.Switch,null,s.default.map(function(e){var t=e.path,n=e.exact,o=e.component,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["path","exact","component"]);return i.default.createElement(u.Route,{key:t,path:t,exact:n,render:function(e){return i.default.createElement(o,r({},e,a))}})}),i.default.createElement(u.Route,{render:function(e){return i.default.createElement(l.default,e)}})))}}]),t}();t.default=(0,u.withRouter)((0,p.connect)(function(e){return{redux:e}},function(e){return(0,f.bindActionCreators)(d.ActionCreators,e)})(m))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(2),s=n(3),u=n(4);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={message:"Anything you want!",open_message:!1},n.formatMessage=n.formatMessage.bind(n),n.sendNewMessage=n.sendNewMessage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"formatMessage",value:function(e,t){return e.username=this.props.redux.user.username,JSON.stringify({type:"global-chat",message:e,auth:t})}},{key:"sendNewMessage",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,checkForAllTokens();case 2:return n=e.sent,(r=this.formatMessage(t,n)).username=this.props.redux.user.username,e.next=7,this.props.redux.socket.send(r);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(t){var n=t.item,r=n.user_id===e.props.redux.user._id;return a.default.createElement("div",{style:{display:"flex",flexDirection:r?"row-reverse":"row",alignItems:"center"}},a.default.createElement("div",{style:{padding:"0 6px"}},n.avatar?a.default.createElement("img",{style:{borderRadius:13,height:26,width:26,marginTop:3.5},src:n.avatar}):a.default.createElement("img",{style:{borderRadius:13,height:26,width:26,marginTop:3.5},src:"/images/temp_avatar.png"})),a.default.createElement("div",null,a.default.createElement("p",{style:{textAlign:r?"right":"left",fontSize:7,margin:"3px 0",padding:0}},n.username),a.default.createElement("div",{style:{alignSelf:r?"flex-end":"flex-start",backgroundColor:"#0af",borderRadius:16,overflow:"hidden",padding:"5px 10px",marginBottom:10,maxWidth:"calc(100% - 48)"}},a.default.createElement("p",{style:{color:"#fff",margin:0,padding:0,fontSize:12}},n.message))))};return a.default.createElement("div",{style:c.fillSpace},a.default.createElement("div",{style:c.card},a.default.createElement("h1",{style:{textAlign:"center"}},"CHAT HOME"),a.default.createElement("p",null,"Welcome to the chat boiler website.  This page syncs with your chat websocket allowing for real time connection to the app.  Bellow is the global chat room streaming live from the entry time")),a.default.createElement("div",{style:{padding:20,backgroundColor:"#eee",minHeight:100,margin:"0 auto 40px",borderRadius:10,maxWidth:"280px"}},this.props.redux.global_messages.length>0?this.props.redux.global_messages.map(function(e){return a.default.createElement(t,{item:e})}):a.default.createElement("p",null,"No messages yet... try provoking someone")))}}]),t}();t.default=(0,s.connect)(function(e){return{redux:e}},function(e){return(0,i.bindActionCreators)(u.ActionCreators,e)})(l);var c={fillSpace:{flex:1},fillAndCenter:{flex:1,justifyContent:"center",alignContent:"center"},card:{maxWidth:650,padding:20,margin:"auto"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTest=function(e){return{type:r.ADD_TEST,payload:e}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userData=function(e){return{type:r.USER_DATA,payload:e}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadSocket=function(e){return{type:r.SOCKET,payload:e}},t.incomingGlobalChat=function(e){return console.log("running incoming global chat message"),{type:r.GLOBAL_CHAT,payload:e}};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUserData=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=encodeURI(o.server+"/api/user");return(0,r.default)(e,{credentials:"include"}).then(function(e){return console.log(e.json()),e.json()}).catch(function(e){return console.warn(e),null})},t.fetchDemoData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=encodeURI(o.server+"/tests?lang="+e);return(0,r.default)(t,{credentials:"include"}).then(function(e){return e.json()}).catch(function(e){return console.warn(e),null})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(59)),o=n(0)},function(e,t){e.exports=require("isomorphic-fetch")},function(e,t,n){"use strict";e.exports={shuffle:function(e){for(var t=0;t<e.length-1;t++){var n=t+Math.floor(Math.random()*(e.length-t)),r=e[n];e[n]=e[t],e[t]=r}return e},source:[{name:"Roth Arnold",stargazers_count:29,owner:"@Hicks",html_url:"http://example.com"},{name:"Pam Pennington",stargazers_count:27,owner:"@Delacruz",html_url:"http://example.com"},{name:"Lambert Goff",stargazers_count:31,owner:"@Christina",html_url:"http://example.com"},{name:"Calhoun Solis",stargazers_count:37,owner:"@Barr",html_url:"http://example.com"},{name:"Amalia Golden",stargazers_count:40,owner:"@Stewart",html_url:"http://example.com"},{name:"Stout Barker",stargazers_count:38,owner:"@Rivera",html_url:"http://example.com"},{name:"Ayers Oneal",stargazers_count:35,owner:"@Pate",html_url:"http://example.com"},{name:"Vivian Ross",stargazers_count:25,owner:"@Bernard",html_url:"http://example.com"},{name:"Reilly Sargent",stargazers_count:32,owner:"@Allison",html_url:"http://example.com"},{name:"Bettie Pierce",stargazers_count:32,owner:"@Dickerson",html_url:"http://example.com"},{name:"Ruthie Fox",stargazers_count:37,owner:"@Robyn",html_url:"http://example.com"},{name:"Woods Poole",stargazers_count:25,owner:"@Savannah",html_url:"http://example.com"},{name:"Caldwell Sloan",stargazers_count:37,owner:"@Mccarty",html_url:"http://example.com"},{name:"Laurel Vazquez",stargazers_count:27,owner:"@Mona",html_url:"http://example.com"},{name:"Saunders Montgomery",stargazers_count:25,owner:"@Graves",html_url:"http://example.com"},{name:"Serrano Adkins",stargazers_count:26,owner:"@James",html_url:"http://example.com"},{name:"Cannon Rowland",stargazers_count:21,owner:"@Bridgett",html_url:"http://example.com"},{name:"Howell Molina",stargazers_count:36,owner:"@Snow",html_url:"http://example.com"},{name:"Bailey Mercado",stargazers_count:27,owner:"@Bonnie",html_url:"http://example.com"},{name:"Crane Shelton",stargazers_count:24,owner:"@Whitehead",html_url:"http://example.com"},{name:"Selena Craig",stargazers_count:20,owner:"@Sonia",html_url:"http://example.com"},{name:"Rivas Quinn",stargazers_count:40,owner:"@Muriel",html_url:"http://example.com"},{name:"Terrell Jensen",stargazers_count:33,owner:"@Rebekah",html_url:"http://example.com"},{name:"Lea Odom",stargazers_count:39,owner:"@Stark",html_url:"http://example.com"},{name:"Hollie Davidson",stargazers_count:27,owner:"@Knox",html_url:"http://example.com"},{name:"Cox Doyle",stargazers_count:27,owner:"@Watkins",html_url:"http://example.com"},{name:"Tamika Hansen",stargazers_count:37,owner:"@Aida",html_url:"http://example.com"},{name:"Adriana Williams",stargazers_count:36,owner:"@Greene",html_url:"http://example.com"},{name:"Janell Lindsay",stargazers_count:23,owner:"@Bird",html_url:"http://example.com"},{name:"Meghan Ware",stargazers_count:36,owner:"@Lorena",html_url:"http://example.com"},{name:"Boone Bailey",stargazers_count:20,owner:"@Pugh",html_url:"http://example.com"},{name:"Lila Reynolds",stargazers_count:33,owner:"@Leach",html_url:"http://example.com"},{name:"Blair Hanson",stargazers_count:26,owner:"@Annie",html_url:"http://example.com"},{name:"Meyers Santana",stargazers_count:40,owner:"@Ballard",html_url:"http://example.com"},{name:"Warner Mcfarland",stargazers_count:28,owner:"@Baldwin",html_url:"http://example.com"},{name:"Tamera Bright",stargazers_count:25,owner:"@Wilcox",html_url:"http://example.com"}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={palette:{primary:{light:"#77c5ff",main:"#0af",dark:"#006597",contrastText:"#fff"},secondary:{light:"#ff705a",main:"#dd4b39",dark:"#b73e2f;",contrastText:"#fff"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=w(o),i=w(n(17)),s=w(n(18)),u=w(n(19)),l=n(9),c=w(n(20)),f=w(n(21)),p=w(n(22)),d=w(n(23)),h=w(n(15)),m=n(24),g=w(n(25)),y=n(0),v=n(12),b=w(n(63));function w(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:"",password:"",token:null,showPassword:!1,error:!1,open:!1,message:"none"},n.handleLoginEmail=n.handleLoginEmail.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){var e=new URL(window.location.href),t=e.searchParams.get("error")||!1,n=e.searchParams.get("message");n&&this.setState({message:n,open:!0,error:t}),(0,v.getTitle)()}},{key:"handleChange",value:function(e,t){this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t.target.value))}},{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"handleMouseDownPassword",value:function(e){e.preventDefault()}},{key:"handleClickShowPasssword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"handleLoginEmail",value:function(e){var t=!1,n=this.validateEmail(this.state.email);this.state.email&&this.state.password?t=!0:this.setState({error:!0,open:!0,message:"Please enter both a username an password"}),n&&t&&document.getElementById("login-form").submit(),console.log("emailNpassword ===== ",t),t&&this.setState({error:!0,open:!0,message:"The email or password you entered is not valid"})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.error,t.open),r=t.message;return a.default.createElement("div",{id:"login-page",style:b.default.pageWrap},a.default.createElement("div",{style:b.default.panelWrap},a.default.createElement("h1",{style:b.default.title},"Login to Your Account"),a.default.createElement("form",{action:y.server+"/api/login",id:"login-form",method:"POST",className:"login-form",style:b.default.formWrap},a.default.createElement(c.default,{fullWidth:!0},a.default.createElement(s.default,{htmlFor:"login-email"},"Email"),a.default.createElement(i.default,{color:"primary",id:"login-email",name:"email",onChange:function(t){return e.handleChange("email",t)}})),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement(c.default,{fullWidth:!0},a.default.createElement(s.default,{htmlFor:"login-password"},"Password"),a.default.createElement(i.default,{color:"primary",id:"login-password",name:"password",type:this.state.showPassword?"text":"password",onChange:function(t){return e.handleChange("password",t)},endAdornment:a.default.createElement(u.default,{position:"end"},a.default.createElement(d.default,{"aria-label":"Toggle password visibility",onClick:function(){return e.handleClickShowPasssword()},onMouseDown:function(){return e.handleMouseDownPassword()}},this.state.showPassword?a.default.createElement(f.default,null):a.default.createElement(p.default,null)))})),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement("div",{style:b.default.buttonWrapGoogle},a.default.createElement(h.default,{style:b.default.button,variant:"raised",color:"primary",onClick:this.handleLoginEmail},a.default.createElement(m.FaEnvelope,{style:b.default.icon}),"Login With Email"),a.default.createElement("a",{href:y.server+"/auth/facebook",style:{textDecoration:"none"}},a.default.createElement(h.default,{style:b.default.buttonFacebook,variant:"raised",color:"secondary"},a.default.createElement(m.FaFacebook,{style:b.default.icon}),"Login With Facebook"))),a.default.createElement("div",{style:{marginTop:"40px",textAlign:"center"}},a.default.createElement("p",null,"Not signed up yet?"),a.default.createElement(l.NavLink,{to:"/signup"},a.default.createElement(h.default,null,"sign up")))),a.default.createElement(g.default,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,onClose:function(){return e.setState({open:!1})},SnackbarContentProps:{"aria-describedby":"message-id"},message:a.default.createElement("span",{id:"message-id"},this.state.error&&a.default.createElement("font",{style:{color:"#f00",fontWeight:800}},"OOPS! "),r)})))}}]),t}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pageWrap:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},panelWrap:{flex:1,padding:"20px",maxWidth:"460px",margin:"40px auto"},title:{textAlign:"center"},formWrap:{width:320,margin:"auto"},buttonWrapGoogle:{margin:"auto"},button:{width:"100%",height:"40px",marginBottom:10,fontSize:"18px"},buttonFacebook:{backgroundColor:"#3B5998",width:"100%",height:"40px",marginBottom:10,fontSize:"18px"},icon:{position:"absolute",left:8,fontSize:"25px"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=w(o),i=n(9),s=w(n(17)),u=w(n(18)),l=w(n(19)),c=w(n(20)),f=w(n(21)),p=w(n(22)),d=w(n(23)),h=w(n(15)),m=n(24),g=n(0),y=w(n(25)),v=n(12),b=w(n(65));function w(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:"",password:"",token:null,showPassword:!1,error:!1,open:!1,message:"none"},n.handleRegisteration=n.handleRegisteration.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){var e=new URL(window.location.href),t=e.searchParams.get("error")||!1,n=e.searchParams.get("message");n&&this.setState({message:n,open:!0,error:t}),(0,v.getTitle)()}},{key:"handleChange",value:function(e,t){this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t.target.value))}},{key:"handleMouseDownPassword",value:function(e){e.preventDefault()}},{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"handleClickShowPasssword",value:function(){this.setState({showPassword:!this.state.showPassword})}},{key:"handleRegisteration",value:function(e){var t=this.state,n=t.email,r=t.password,o=!1,a=this.validateEmail(n);n&&r?o=!0:this.setState({error:!0,open:!0,message:"Please enter both a username an password"}),a&&o&&document.getElementById("signup-form").submit(),console.log("emailNpassword ===== ",o),o&&this.setState({error:!0,open:!0,message:"The email or password you entered is not valid"})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.error,t.open),r=t.message;return a.default.createElement("div",{id:"signup-page",style:b.default.pageWrap},a.default.createElement("div",{style:b.default.panelWrap},a.default.createElement("h1",{style:b.default.title},"Register Your Account"),a.default.createElement("form",{action:"/api/signup",id:"signup-form",method:"POST",className:"login-form",style:b.default.formWrap},a.default.createElement(c.default,{fullWidth:!0},a.default.createElement(u.default,{htmlFor:"login-email"},"Email"),a.default.createElement(s.default,{color:"primary",id:"login-email",name:"email",onChange:function(t){return e.handleChange("email",t)}})),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement(c.default,{fullWidth:!0},a.default.createElement(u.default,{htmlFor:"login-password"},"Password"),a.default.createElement(s.default,{color:"primary",id:"login-password",name:"password",type:this.state.showPassword?"text":"password",onChange:function(t){return e.handleChange("password",t)},endAdornment:a.default.createElement(l.default,{position:"end"},a.default.createElement(d.default,{"aria-label":"Toggle password visibility",onClick:function(){return e.handleClickShowPasssword()},onMouseDown:function(){return e.handleMouseDownPassword()}},this.state.showPassword?a.default.createElement(f.default,null):a.default.createElement(p.default,null)))})),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement("div",{style:{margin:"auto"}},a.default.createElement(h.default,{value:"Sign In",style:b.default.button,variant:"raised",color:"primary",onClick:this.handleRegisteration},a.default.createElement(m.FaEnvelope,{style:{position:"absolute",left:8,top:7,fontSize:"25px"}}),"SIGN UP WITH EMAIL"),a.default.createElement("p",{style:{textAlign:"center",margin:"0 0"}},"OR"),a.default.createElement("a",{href:g.server+"/auth/facebook",style:{textDecoration:"none"}},a.default.createElement(h.default,{style:b.default.buttonFacebook,variant:"raised",color:"secondary"},a.default.createElement(m.FaFacebook,{style:b.default.icon}),"Sign Up With Facebook"))),a.default.createElement("div",{style:{marginTop:"40px",textAlign:"center"}},a.default.createElement("p",null,"Already signed up?"),a.default.createElement(i.NavLink,{to:"/login"},a.default.createElement(h.default,null,"log in")))),a.default.createElement(y.default,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:n,onClose:function(){return e.setState({open:!1})},SnackbarContentProps:{"aria-describedby":"message-id"},message:a.default.createElement("span",{id:"message-id"},this.state.error&&a.default.createElement("font",{style:{color:"#f00",fontWeight:800}},"OOPS! "),r)})))}}]),t}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pageWrap:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},panelWrap:{flex:1,padding:"20px",maxWidth:"460px",margin:"40px auto"},buttonFacebook:{marginTop:10,backgroundColor:"#3B5998",width:"100%",height:"40px",marginBottom:10,fontSize:"18px"},title:{textAlign:"center"},formWrap:{width:320,margin:"auto"},button:{width:"100%",height:"40px",marginBottom:10,fontSize:"18px"},icon:{position:"absolute",left:8,fontSize:"25px"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(2),s=n(3),u=n(4);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return this.props.redux.user._id?a.default.createElement("div",{style:c.profileWrap},this.props.redux.user.avatar?a.default.createElement("img",{style:c.avatar,src:this.props.redux.user.avatar}):null,a.default.createElement("div",{style:c.meta},a.default.createElement("i",{style:c.icon,class:"fas fa-user"}),a.default.createElement("p",null,"@",this.props.redux.user.username)),a.default.createElement("div",{style:c.meta},a.default.createElement("i",{style:c.icon,class:"fas fa-envelope"}),a.default.createElement("p",null,this.props.redux.user.email)),a.default.createElement("div",{style:c.meta},a.default.createElement("i",{style:c.icon,class:"fas fa-id-card"}),a.default.createElement("p",null,"ID: ",this.props.redux.user._id.toString())),a.default.createElement("p",null," Use the app to change your profile")):null}}]),t}();t.default=(0,s.connect)(function(e){return{redux:e}},function(e){return(0,i.bindActionCreators)(u.ActionCreators,e)})(l);var c={avatar:{maxWidth:200,maxHeight:200,borderRadius:"100px",boxShadow:"2px 2px 4px rgba(0,0,0,0.1)"},meta:{width:"100%",maxWidth:"300px",boxShadow:"2px 2px 3px rgba(0,0,0,0.2)",textAlign:"left",margin:"5px auto",padding:"0px 20px",background:"#fafafa",display:"flex",alignItems:"center"},profileWrap:{maxWidth:"400px",margin:"auto",padding:"20px",textAlign:"center"},icon:{width:30,height:30,marginRight:20,background:"#fff",borderRadius:"100%",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"2px 2px 4px rgba(0,0,0,0.1)"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(2),s=n(3),u=n(4);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=void 0;return r=n.props.staticContext.repos,n.state={repos:r,loading:!r},n.fetchRepos=n.fetchRepos.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){this.state.repos||this.fetchRepos(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.fetchRepos(this.props.match.params.id)}},{key:"fetchRepos",value:function(e){var t=this;this.setState(function(){return{loading:!0}}),this.props.fetchInitialData(e).then(function(e){return t.setState(function(){return{repos:e,loading:!1}})}).then(function(){return document.title="Results for "+t.state.repos.lang})}},{key:"render",value:function(){var e=this.state,t=e.repos;return!0===e.loading?a.default.createElement("h1",null,"LOADING..."):a.default.createElement("div",{style:{padding:"0 20px"}},a.default.createElement("h1",{style:{textAlign:"center"}},"Welcome to ",t.lang),a.default.createElement("ul",{style:{display:"flex",flexWrap:"wrap",backgroundColor:"#eee"}},t.response.map(function(e){var t=e.name,n=e.owner,r=e.stargazers_count,o=e.html_url;return a.default.createElement("li",{key:t,style:{margin:30}},a.default.createElement("ul",null,a.default.createElement("li",null,a.default.createElement("a",{href:o},t)),a.default.createElement("li",null,n),a.default.createElement("li",null,r," stars")))})))}}]),t}();t.default=(0,s.connect)(function(e){return{state:e}},function(e){return(0,i.bindActionCreators)(u.ActionCreators,e)})(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(2),s=n(3),u=n(4);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){return a.default.createElement("div",{style:c.wrap},a.default.createElement("h1",{style:c.title},"404... This page was not found!"))}}]),t}();t.default=(0,s.connect)(function(e){return{state:e}},function(e){return(0,i.bindActionCreators)(u.ActionCreators,e)})(l);var c={wrap:{flex:1,alignItems:"center",justifyContent:"center"},title:{margin:0,textAlign:"center"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=f(o),i=n(9),s=n(2),u=n(3),l=n(4),c=f(n(15));function f(e){return e&&e.__esModule?e:{default:e}}var p=[{url:"/",name:"Home"},{url:"/login",name:"Log In"},{url:"/signup",name:"Register"}],d=[{url:"/",name:"Home"},{url:"/profile",name:"Profile"},{url:"/test/page1",name:"Page 1"},{url:"/test/page2",name:"Page 2"},{url:"/test/page3",name:"Page 3"}],h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.logout=n.logout.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"logout",value:function(){window.location.href="/auth/logout"}},{key:"render",value:function(){var e=this.props.redux,t=e.user.login?d:p;return a.default.createElement("div",{className:"navbar"},a.default.createElement("i",{style:{position:"absolute",left:"40px",background:"#fff",color:"#0af",width:"45px",height:"45px",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%"},class:"fas fa-comments"}),a.default.createElement("ul",{style:{position:"absolute",bottom:0,right:0}},t.map(function(e,t){var n=e.name,r=e.url;return a.default.createElement(i.NavLink,{key:t,activeStyle:{fontWeight:"bold"},to:r},a.default.createElement(c.default,{style:{color:"#fff"}},n))}),e.user.login&&a.default.createElement("a",{onClick:this.logout},a.default.createElement(c.default,{style:{color:"#fff"}},"Log Out"))))}}]),t}();t.default=(0,u.connect)(function(e){return{redux:e}},function(e){return(0,s.bindActionCreators)(l.ActionCreators,e)})(h)},function(e,t){e.exports=require("react-transition-group")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=(function(e){e&&e.__esModule}(o),n(2)),i=n(3),s=n(4),u=n(0);function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var c=void 0,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={connected:!1},n.connect=n.connect.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){console.log("%cSOCKET STATUS: %cCONNECTING","color: #00aaff","color: #ffaa00"),this.connect()}},{key:"connect",value:function(){var e=l(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(c),e.next=3,this.props.loadSocket({});case 3:(t=new WebSocket(u.wsURL)).onopen=l(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("%cSOCKET STATUS: %cCONNECTED","color: #00aaff","color: #00aa00"),r="some_token",t.send(JSON.stringify({type:"initial-login",user:n.props.redux.user,auth:r})),n.props.loadSocket(t);case 4:case"end":return e.stop()}},e,n)})),t.onmessage=function(){var e=l(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"initial-login"===(r=JSON.parse(t.data)).type&&(console.log("%cINITIAL LOGIN STATUS: %cAUTHORIZED","color: #ff6600","color: #00aa00"),console.log({data:r})),"global-chat"===r.type&&n.props.incomingGlobalChat(r);case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),t.onclose=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("socket closed! reconnecting"),e.next=3,n.props.loadSocket({});case 3:return e.next=5,setTimeout(function(e){return n.connect()},1e3);case 5:c=e.sent;case 6:case"end":return e.stop()}},e,n)})),t.onerror=function(){var e=l(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("socket error! closing"),e.next=3,t.close();case 3:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}();t.default=(0,i.connect)(function(e){return{redux:e}},function(e){return(0,a.bindActionCreators)(s.ActionCreators,e)})(f)},function(e,t){e.exports=require("serialize-javascript")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=s(n(74)),a=s(n(75)),i=s(n(76));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.default=(0,r.combineReducers)(Object.assign(o,a,i))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.test=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));t.test=(0,r.default)([],function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},o.ADD_TEST,function(e,t){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[{value:t.payload,count:e.length+1}])}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.user=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));t.user=(0,r.default)({login:!1},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},o.USER_DATA,function(e,t){return t.payload}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.global_messages=t.socket=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(16)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.socket=(0,r.default)({},a({},o.SOCKET,function(e,t){return t.payload})),t.global_messages=(0,r.default)([],a({},o.GLOBAL_CHAT,function(e,t){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[t.payload])}))},function(e,t){e.exports=require("react-jss/lib/jss")},function(e,t){e.exports=require("react-jss/lib/JssProvider")},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t,n){var r=n(81);(e.exports=r).Strategy=r},function(e,t,n){var r=n(82),o=n(11),a=n(83).lookup;function i(e,t){if("function"==typeof e&&(t=e,e={}),!t)throw new TypeError("LocalStrategy requires a verify callback");this._usernameField=e.usernameField||"username",this._passwordField=e.passwordField||"password",r.Strategy.call(this),this.name="local",this._verify=t,this._passReqToCallback=e.passReqToCallback}o.inherits(i,r.Strategy),i.prototype.authenticate=function(e,t){t=t||{};var n=a(e.body,this._usernameField)||a(e.query,this._usernameField),r=a(e.body,this._passwordField)||a(e.query,this._passwordField);if(!n||!r)return this.fail({message:t.badRequestMessage||"Missing credentials"},400);var o=this;function i(e,t,n){return e?o.error(e):t?void o.success(t,n):o.fail(n)}try{o._passReqToCallback?this._verify(e,n,r,i):this._verify(n,r,i)}catch(e){return o.error(e)}},e.exports=i},function(e,t){e.exports=require("passport-strategy")},function(e,t){t.lookup=function(e,t){if(!e)return null;for(var n=t.split("]").join("").split("["),r=0,o=n.length;r<o;r++){var a=e[n[r]];if(void 0===a)return null;if("object"!=typeof a)return a;e=a}return null}},function(e,t){e.exports=require("passport-facebook")},function(e,t,n){var r=n(86);(e.exports=r).Strategy=r},function(e,t,n){var r=n(26),o=n(11),a=n(87),i=n(88),s=n(92),u=n(26).InternalOAuthError,l=n(93);function c(e,t){(e=e||{}).requestTokenURL=e.requestTokenURL||"https://api.twitter.com/oauth/request_token",e.accessTokenURL=e.accessTokenURL||"https://api.twitter.com/oauth/access_token",e.userAuthorizationURL=e.userAuthorizationURL||"https://api.twitter.com/oauth/authenticate",e.sessionKey=e.sessionKey||"oauth:twitter",r.call(this,e,t),this.name="twitter",this._userProfileURL=e.userProfileURL||"https://api.twitter.com/1.1/account/verify_credentials.json",this._skipExtendedUserProfile=void 0!==e.skipExtendedUserProfile&&e.skipExtendedUserProfile,this._includeEmail=void 0!==e.includeEmail&&e.includeEmail,this._includeStatus=void 0===e.includeStatus||e.includeStatus,this._includeEntities=void 0===e.includeEntities||e.includeEntities}o.inherits(c,r),c.prototype.authenticate=function(e,t){if(e.query&&e.query.denied)return this.fail();r.prototype.authenticate.call(this,e,t)},c.prototype.userProfile=function(e,t,n,r){if(this._skipExtendedUserProfile){var o={provider:"twitter"};o.id=n.user_id,o.username=n.screen_name,r(null,o)}else{var i,c=a.parse(this._userProfileURL);c.query=c.query||{},c.pathname.indexOf("/users/show.json")==c.pathname.length-"/users/show.json".length&&(c.query.user_id=n.user_id),1==this._includeEmail&&(c.query.include_email=!0),0==this._includeStatus&&(c.query.skip_status=!0),0==this._includeEntities&&(c.query.include_entities=!1),this._oauth.get(a.format(c),e,t,function(e,t,n){if(e){if(e.data)try{i=JSON.parse(e.data)}catch(e){}if(i&&i.errors&&i.errors.length){var o=i.errors[0];return r(new l(o.message,o.code))}return r(new u("Failed to fetch user profile",e))}try{i=JSON.parse(t)}catch(e){return r(new Error("Failed to parse user profile"))}var a=s.parse(i);a.provider="twitter",a._raw=t,a._json=i,a._accessLevel=n.headers["x-access-level"],r(null,a)})}},c.prototype.userAuthorizationParams=function(e){var t={};return e.forceLogin&&(t.force_login=e.forceLogin),e.screenName&&(t.screen_name=e.screenName),t},c.prototype.parseErrorResponse=function(e,t){var n,r;try{if(n=JSON.parse(e),Array.isArray(n.errors)&&n.errors.length>0)return new Error(n.errors[0].message)}catch(t){return r=i(e),new Error(r.children("error").t()||e)}},e.exports=c},function(e,t){e.exports=require("url")},function(e,t,n){var r=n(89);e.exports=r.wrap},function(e,t,n){var r=n(90),o=r.DOMParser,a=r.XMLSerializer;function i(e){return"string"==typeof(e=e||[])&&(e=(new o).parseFromString(e)),e.attrNS&&e._related?e:(e.documentElement?e=[e.documentElement]:e.nodeType&&(e=[e]),new s(e))}function s(e){if(this.length=0,e){e=function(e){for(var t,n,r=[],o=-1;++o<e.length;){for(t=-1,n=!1;++t<r.length;)if(r[t]===e[o]){n=!0;break}n||r.push(e[o])}return r}(e),this.length=e.length;for(var t=0,n=e.length;t<n;t++)this[t]=e[t]}}s.prototype.each=s.prototype.forEach=function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this);return this},s.prototype.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(!e.call(t,this[n],n,this))return!1;return!0},s.prototype.some=function(e,t){for(var n=0,r=this.length;n<r;n++)if(e.call(t,this[n],n,this))return!1;return!1},s.prototype.map=function(e,t,n){for(var r,o=[],a=0,i=this.length;a<i;a++)!(r=e.call(t,this[a],a,this))&&!1!==r&&n||o.push(r);return o},s.prototype.root=s.prototype.tree=function(){return i(this[0]?this[0].ownerDocument:[])},s.prototype.up=s.prototype.parent=function(e,t){return this._related("parentNode",e,t,1)},s.prototype.children=function(e,t){var n=[];return this.forEach(function(r){for(var o=r.firstChild;o;o=o.nextSibling)1!==o.nodeType||e&&e!==o.localName||t&&t!==o.namespaceURI||n.push(o)}),i(n)},s.prototype.siblings=function(e,t){var n=[];return this.forEach(function(r){var o=r;for(r=r.parentNode.firstChild;r;r=r.nextSibling)1!==r.nodeType||e&&e!==r.localName||t&&t!==r.namespaceURI||r===o||n.push(r)}),i(n)},s.prototype.at=function(e){return i(this[e])},s.prototype.first=function(e,t){for(var n,r=0,o=this.length;r<o;++r)if(n=this[r],!(e&&e!==n.localName||t&&t!==n.namespaceURI))return i(n);return i([])},s.prototype.last=function(e,t){for(var n,r=this.length-1;r>0;--r)if(n=this[r],!(e&&e!==n.localName||t&&t!==n.namespaceURI))return i(n);return i([])},s.prototype.next=function(e,t){return this._related("nextSibling",e,t)},s.prototype.prev=s.prototype.previous=function(e,t){return this._related("previousSibling",e,t)},s.prototype._related=function(e,t,n,r){return r=void 0!==r?r:Number.MAX_VALUE,i(this.map(function(o){var a=0;for(o=o[e];o&&(1!==o.nodeType||t&&t!==o.localName||n&&n!==o.namespaceURI)&&++a<r;)o=o[e];return a<r?o:null},null,!0))},s.prototype.is=function(e,t){return e==this.name()&&(!t||t===this.ns())},s.prototype.name=function(){return this[0]?this[0].localName:null},s.prototype.ns=s.prototype.namespace=function(){return this[0]?this[0].namespaceURI:null},s.prototype.attr=s.prototype.attrs=function(e,t){if(t||"object"==typeof e){var n={};return t?n[e]=t:n=e,this.forEach(function(e){for(var t in n)e&&e.setAttribute(t,n[t])})}return this[0]&&this[0].getAttribute(e)||null},s.prototype.attrNS=function(e,t,n){return n?this.forEach(function(r){r&&r.setAttributeNS(t,e,n)}):this[0]&&this[0].getAttributeNS(t,e)||null},s.prototype.t=s.prototype.text=function(e){return e?this.empty().forEach(function(t){var n=t.ownerDocument.createTextNode(e);t.appendChild(n)}):this[0]&&this[0].textContent||null},s.prototype.c=function(e,t,n){var r=this;return i(this.map(function(o){var a=r._build(e,t);if(a){if(n){var i=o.ownerDocument.createTextNode(n);a.appendChild(i)}return o.appendChild(a),a}}))},s.prototype._build=function(e,t,n){if(!this[0])return null;"object"==typeof t&&(n=t,t=void 0),(n=n||{}).xmlns&&(t=n.xmlns,delete n.xmlns);var r,o=this[0].ownerDocument;for(var e in t?(r=o.createElementNS(t,e)).setAttribute("xmlns",t):r=o.createElement(e),n)r.setAttribute(e,n[e]);return r},s.prototype.empty=function(){return this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})},s.prototype.toString=function(){return this[0]?(new a).serializeToString(this[0]):null},(e.exports=s).wrap=i},function(e,t,n){function r(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function i(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,a=n.domBuilder||new o,s=n.errorHandler,u=n.locator,c=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&a.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof o)return t;e=t}var r={},a=e instanceof Function;function s(t){var o=e[t];!o&&a&&(o=2==e.length?function(n){e(t,n)}:e),r[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+i(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,a,u),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp="",f.copy="",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,f):r.errorHandler.error("invalid doc source"),a.doc},o.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,i=o.createElementNS(e,n||t),s=r.length;u(this,i),this.currentElement=i,this.locator&&a(this.locator,i);for(var l=0;l<s;l++){e=r.getURI(l);var c=r.getValue(l),f=(n=r.getQName(l),o.createAttributeNS(e,n));this.locator&&a(r.getLocator(l),f),f.value=f.nodeValue=c,i.setAttributeNode(f)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&a(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&a(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&a(this.locator,o),u(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,i(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,i(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,i(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var l=n(91).XMLReader,c=t.DOMImplementation=n(27).DOMImplementation;t.XMLSerializer=n(27).XMLSerializer,t.DOMParser=r},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),a=0,i=1,s=2,u=3,l=4,c=5,f=6,p=7;function d(){}function h(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function m(e,t,n,r,o,d){for(var h,m=++t,g=a;;){var y=e.charAt(m);switch(y){case"=":if(g===i)h=e.slice(t,m),g=u;else{if(g!==s)throw new Error("attribute equal must after attrName");g=u}break;case"'":case'"':if(g===u||g===i){if(g===i&&(d.warning('attribute value must after "="'),h=e.slice(t,m)),t=m+1,!((m=e.indexOf(y,t))>0))throw new Error("attribute value no end '"+y+"' match");v=e.slice(t,m).replace(/&#?\w+;/g,o),n.add(h,v,t-1),g=c}else{if(g!=l)throw new Error('attribute value must after "="');v=e.slice(t,m).replace(/&#?\w+;/g,o),n.add(h,v,t),d.warning('attribute "'+h+'" missed start quot('+y+")!!"),t=m+1,g=c}break;case"/":switch(g){case a:n.setTagName(e.slice(t,m));case c:case f:case p:g=p,n.closed=!0;case l:case i:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return d.error("unexpected end of input"),g==a&&n.setTagName(e.slice(t,m)),m;case">":switch(g){case a:n.setTagName(e.slice(t,m));case c:case f:case p:break;case l:case i:"/"===(v=e.slice(t,m)).slice(-1)&&(n.closed=!0,v=v.slice(0,-1));case s:g===s&&(v=h),g==l?(d.warning('attribute "'+v+'" missed quot(")!!'),n.add(h,v.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===r[""]&&v.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),n.add(v,v,t));break;case u:throw new Error("attribute value missed!!")}return m;case"":y=" ";default:if(y<=" ")switch(g){case a:n.setTagName(e.slice(t,m)),g=f;break;case i:h=e.slice(t,m),g=s;break;case l:var v=e.slice(t,m).replace(/&#?\w+;/g,o);d.warning('attribute "'+v+'" missed quot(")!!'),n.add(h,v,t);case c:g=f}else switch(g){case s:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&h.match(/^(?:disabled|checked|selected)$/i)||d.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),n.add(h,h,t),t=m,g=i;break;case c:d.warning('attribute space is required"'+h+'"!!');case f:g=i,t=m;break;case u:g=l,t=m;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function g(e,t,n){for(var r=e.tagName,o=null,a=e.length;a--;){var i=e[a],s=i.qName,u=i.value;if((p=s.indexOf(":"))>0)var l=i.prefix=s.slice(0,p),c=s.slice(p+1),f="xmlns"===l&&c;else c=s,l=null,f="xmlns"===s&&"";i.localName=c,!1!==f&&(null==o&&(o={},b(n,n={})),n[f]=o[f]=u,i.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,u))}for(a=e.length;a--;){(l=(i=e[a]).prefix)&&("xml"===l&&(i.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(i.uri=n[l||""]))}var p;(p=r.indexOf(":"))>0?(l=e.prefix=r.slice(0,p),c=e.localName=r.slice(p+1)):(l=null,c=e.localName=r);var d=e.uri=n[l||""];if(t.startElement(d,c,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(d,c,r),o)for(l in o)t.endPrefixMapping(l)}function y(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),i=e.substring(t+1,a);if(/[&<]/.test(i))return/^script$/i.test(n)?(o.characters(i,0,i.length),a):(i=i.replace(/&#?\w+;/g,r),o.characters(i,0,i.length),a)}return t+1}function v(e,t,n,r){var o=r[n];return null==o&&((o=e.lastIndexOf("</"+n+">"))<t&&(o=e.lastIndexOf("</"+n)),r[n]=o),o<t}function b(e,t){for(var n in e)t[n]=e[n]}function w(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var a=function(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=t,o.exec(e);for(;n=o.exec(e);)if(r.push(n),n[1])return r}(e,t),i=a.length;if(i>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],u=i>3&&/^public$/i.test(a[2][0])&&a[3][0],l=i>4&&a[4][0],c=a[i-1];return n.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}}return-1}function _(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return n.processingInstruction(o[1],o[2]),r+2}return-1}return-1}function x(e){}function E(e,t){return e.__proto__=t,e}d.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),b(t,t={}),function(e,t,n,r,o){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function i(t){if(t>b){var n=e.substring(b,t).replace(/&#?\w+;/g,a);f&&s(b),r.characters(n,0,t-b),b=t}}function s(t,n){for(;t>=l&&(n=c.exec(e));)u=n.index,l=u+n[0].length,f.lineNumber++;f.columnNumber=t-u+1}var u=0,l=0,c=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,p=[{currentNSMap:t}],d={},b=0;for(;;){try{var E=e.indexOf("<",b);if(E<0){if(!e.substr(b).match(/^\s*$/)){var S=r.doc,k=S.createTextNode(e.substr(b));S.appendChild(k),r.currentElement=k}return}switch(E>b&&i(E),e.charAt(E+1)){case"/":var O=e.indexOf(">",E+3),N=e.substring(E+2,O),T=p.pop();O<0?(N=e.substring(E+2).replace(/[\s<].*/,""),o.error("end tag name: "+N+" is not complete:"+T.tagName),O=E+1+N.length):N.match(/\s</)&&(N=N.replace(/[\s<].*/,""),o.error("end tag name: "+N+" maybe not complete"),O=E+1+N.length);var C=T.localNSMap,A=T.tagName==N,R=A||T.tagName&&T.tagName.toLowerCase()==N.toLowerCase();if(R){if(r.endElement(T.uri,T.localName,N),C)for(var D in C)r.endPrefixMapping(D);A||o.fatalError("end tag name: "+N+" is not match the current start tagName:"+T.tagName)}else p.push(T);O++;break;case"?":f&&s(E),O=_(e,E,r);break;case"!":f&&s(E),O=w(e,E,r,o);break;default:f&&s(E);var P=new x,j=p[p.length-1].currentNSMap,O=m(e,E,P,j,a,o),I=P.length;if(!P.closed&&v(e,O,P.tagName,d)&&(P.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),f&&I){for(var M=h(f,{}),L=0;L<I;L++){var q=P[L];s(q.offset),q.locator=h(f,{})}r.locator=M,g(P,r,j)&&p.push(P),r.locator=f}else g(P,r,j)&&p.push(P);"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?O++:O=y(e,O,P.tagName,a,r)}}catch(e){o.error("element parse error: "+e),O=-1}O>b?b=O:i(Math.max(E,b)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},x.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},E({},E.prototype)instanceof E||(E=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=d},function(e,t){t.parse=function(e){"string"==typeof e&&(e=JSON.parse(e));var t={};return t.id=String(e.id),e.id_str&&(t.id=e.id_str),t.username=e.screen_name,t.displayName=e.name,e.email&&(t.emails=[{value:e.email}]),t.photos=[{value:e.profile_image_url_https}],t}},function(e,t){function n(e,t){Error.call(this),Error.captureStackTrace(this,arguments.callee),this.name="APIError",this.message=e,this.code=t,this.status=500}n.prototype.__proto__=Error.prototype,e.exports=n},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t){e.exports=require("bcrypt-nodejs")},function(e,t){e.exports=require("passport-facebook-token")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(5)),o=n(0);var a=(0,r.default)();a.get("/",function(e,t){var n=o.demoObject.shuffle,r=o.demoObject.source,a=e.query.lang,i=n(r);console.log("response => ",i.length),console.log("lang => ",a),t.json({response:i,lang:a})}),t.default=a},function(e,t,n){"use strict";var r=s(n(5)),o=s(n(6)),a=s(n(13)),i=n(0);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var l=n(8),c=n(29),f=n(30),p=n(31);p.mongo=l.mongo;var d=l.connection,h=void 0,m=r.default.Router();m.post("/signup",o.default.authenticate("local-signup",{successRedirect:"/",failureRedirect:"/signup?error=true&message=That+email+is+already+taken.++Try again"})),m.post("/login",o.default.authenticate("local-login",{successRedirect:"/",failureRedirect:"/login?error=true&message=Your+email/password+was+incorrect!"})),m.post("/check-username",function(){var e=u(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.body.username.toLowerCase().replace(/[^a-zA-Z ]/g,"").replace(/ /g,"_"),e.next=3,a.default.findOne({username:r});case 3:o=e.sent,console.log({"check-username":r}),console.log({nameTaken:!o}),n.json({status:200,username:r,nameAvailable:!o});case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),m.post("/update-user",o.default.authenticate("jwt",{session:!1}),function(){var e=u(regeneratorRuntime.mark(function e(t,n){var r,o,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.body.username.toLowerCase(),o=t.user._id,e.next=4,a.default.findOne({username:r});case 4:if(e.sent){e.next=16;break}return e.next=8,a.default.findOne({_id:o});case 8:return(s=e.sent).username=r,e.next=12,a.default.update({_id:t.user._id},s);case 12:u=e.sent,n.json({status:i.status_codes.OK,username:r.replace(/[^a-zA-Z ]/g,"").replace(/ /g,"_"),update:u}),e.next=17;break;case 16:n.json({status:i.status_codes.RESOURCE_ALREADY_EXISTS,message:'The username "'+r+'" is already taken'});case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),d.once("open",function(){d.db.collection("fs.files");h=p(d.db),m.use(c({limit:"10mb"})),m.get("/images/:imgname",function(e,t){console.log("This is inside th eiage endpoit");var n=e.params.imgname,r=e.query.size;h.files.find({filename:n}).toArray(function(e,n){if(0===n.length)return t.status(404).send({message:"File not found"});var o=[],a=h.createReadStream({filename:n[0].filename});a.on("data",function(e){o.push(e)}),a.on("end",u(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Buffer.concat(o),!r){e.next=7;break}r=parseInt(r),console.log({data:o.length}),f.read(o,function(e,n){n.resize(r,r,f.RESIZE_BEZIER).getBuffer(f.MIME_PNG,function(e,n){e&&console.log({err:e}),t.end(n)})}),e.next=9;break;case 7:return n=Buffer(o),e.abrupt("return",t.end(n));case 9:case"end":return e.stop()}},e,void 0)}))),a.on("error",function(e){t.status(500).send(e),console.log("An error occurred!",e)})})}),m.post("/image",o.default.authenticate("jwt",{session:!1}),function(){var e=u(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,s,c,f,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.files.file,o=t.body.is_profile,a=t.body.is_banner,i=t.body.user_id,s=l.Types.ObjectId(),c=t.user._id.toString(),f=c.substring(c.length-4),p={url:"api/images/img_"+s+"_"+f,is_profile:o,is_banner:a,is_library:!1,title:t.body.title,description:t.body.desc,users_tagged:t.body.tags,user_id:i},console.log(t.body),(d=h.createWriteStream({filename:"img_"+s+"_"+f,mode:"w",content_type:r.mimetype,metadata:p})).on("close",function(){var e=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||n.status(400).send("No file received"),e.abrupt("return",n.status(200).send({message:"Upload was a success!",file:t}));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),d.write(r.data,function(){d.end()});case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())}),e.exports=m},function(e,t,n){"use strict";var r=i(n(5)),o=i(n(6)),a=n(0);function i(e){return e&&e.__esModule?e:{default:e}}n(10)(o.default),o.default.authenticate("jwt",{session:!1});var s=n(14),u=r.default.Router();u.get("/facebook",o.default.authenticate("facebook",{scope:["email","user_friends","user_location"]})),u.get("/facebook/callback",o.default.authenticate("facebook",{failureRedirect:""+a.server}),function(e,t){t.redirect("/")}),u.post("/facebook/token",o.default.authenticate("facebook-token"),function(e,t){var n=void 0,r=void 0;e.user&&(delete(n=e.user).password,n.password="xxx",delete n.facebook.refresh_token,n.facebook.refresh_token="xxx",r=s.sign(n.toJSON(),a.secret)),t.send(n?{status:a.status_codes.OK,user:n,token:r}:{status:a.status_codes.RESOURCE_DOESNT_EXIST})}),u.get("/google",o.default.authenticate("google",{scope:["profile","email"]})),u.get("/google/callback",o.default.authenticate("google",{successRedirect:"/",failureRedirect:"/"})),u.get("/logout",function(e,t){e.logout(),t.redirect("/")}),e.exports=u},function(e,t,n){"use strict";var r=a(n(5)),o=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var i=n(8);n(10)(o.default),o.default.authenticate("jwt",{session:!1});var s=n(14),u=n(0),l=u.secret,c=u.status_codes,f=n(13),p=r.default.Router();n(29),n(30);n(31).mongo=i.mongo;i.connection;p.post("/signup",function(e,t,n){o.default.authenticate("local-mobile-signup",function(e,r,o){if(e)return n(e);if(!r)return t.json({status:c.RESOURCE_ALREADY_EXISTS,message:o.message});var a=s.sign(r.toJSON(),l);t.json({status:c.RESOURCE_CREATED,user:r,token:a})})(e,t,n)}),p.post("/login",function(e,t){var n={$or:[{email:e.body.email.toLowerCase()},{username:e.body.email.toLowerCase()}]};console.log({query:n}),f.findOne(n,function(n,r){if(n)throw n;r?r.comparePasswordMobile(e.body.password,function(e,n){if(n&&!e){var o=s.sign(r.toJSON(),l),a=r.toJSON();delete a.password,a.facebook&&delete a.facebook.refresh_token,t.json({status:c.OK,token:o,user:a})}else t.json({status:c.BAD_CREDENTIALS,error:"Authentication failed, check username and password"})}):t.status(c.RESOURCE_DOESNT_EXIST).send({status:c.RESOURCE_DOESNT_EXIST,message:"Authentication failed. User not found."})})}),p.post("/auto-login",o.default.authenticate("jwt",{session:!1}),function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.json({status:200,user:t.user});case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),e.exports=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),o=n(32),a=n(102);n(10)(r.default),r.default.authenticate("jwt",{session:!1});var i=[];setInterval(function(){i.length>100&&(i=[])},6e4),t.default=function(e){var t=e.ws,n=e.wss;e.req;t.on("message",function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(r){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("connection made!",r),"initial-login"!==(r=JSON.parse(r)).type){e.next=9;break}return e.next=5,(0,o.login)({wss:n,ws:t,data:r}).catch(function(e){return alert(e,'error from socket auth message "login()"')});case 5:(s=e.sent).type="initial-login",s.running_chat=i,t.send(JSON.stringify(s));case 9:(0,a.incomingChatService)({data:r,ws:t,wss:n});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.incomingChatService=void 0;var r=n(32),o=function(e){return e&&e.__esModule?e:{default:e}}(n(103));t.incomingChatService=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(t){var n,a,i,s=t.data,u=t.wss,l=t.ws;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("this is the message data type",s.type),"global-chat"!==s.type){e.next=7;break}return e.next=4,(0,r.login)({wss:u,ws:l,data:s}).catch(function(e){return alert(e,'error from socket auth message "login()"')});case 4:n=e.sent,a=n.user,200===n.status?((i=s.message).avatar=!!a.avatar&&a.avatar,i.type="global-chat",o.default.create(i),u.clients.forEach(function(e){return e.send(JSON.stringify(i))})):l.send(JSON.stringify({status:status_codes.RESOURCE_DOESNT_EXIST,message:"error skt105: There seems to be an issue authenticating your login, please log in again to ensure propper functionality"}));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";var r=n(8),o=r.Schema({avatar:String,chaticon:String,mention:String,message:String,username:String,user_id:String});e.exports=r.model("Chat",o)},function(e,t){e.exports=require("express-ws")}]);